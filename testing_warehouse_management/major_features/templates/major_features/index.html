{% extends "major_features/layout.html" %}

{% block body %}
<h2>Phương pháp quản lý hàng tồn kho</h2>

<div id="products-container">
    <table class="table">
        <thead>
          <tr>
            <th scope="col">Mã sản phẩm</th>
            <th scope="col">Tên sản phẩm</th>
            <th scope="col">Số lượng tồn kho</th>
            <th scope="col">Tổng giá trị lô hàng</th>
          </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td scope="col">{{ product.sku }}</td>
                <td scope="col">{{ product.name }}</td>
                <td scope="col">{{ product.quantity_on_hand }}</td>
                <td scope="col">{{ product.current_total_value}}</td>
              </tr>
            {% endfor %}
        </tbody>
      </table>
</div>

{% if method %}
<p>Phương pháp xác định giá trị hàng tồn kho đang được chọn: <strong>{{ method.name }}</strong></p>
<p><strong>Ngày bắt đầu ghi sổ kế toán: </strong>{{ accounting_period.date_applied }}</p>
<p><strong>Ngày kết thúc: </strong>{{ accounting_period.date_end }}</p>
{% else %}
<div class="alert alert-danger" role="alert">
    Không có phương pháp nào được chọn
    <a href="{% url 'apply_warehouse_management' %}">Tiến hành chọn phương pháp</a>
</div>
{% endif %}

<form action="{% url 'date_handling' %}" method="post">
    {% csrf_token %}
    {{ date_picker_form.as_p }}
    <input type="submit" value="Submit">
</form>

{% if alert_message %}
<div class="alert alert-danger" role="alert">
  {{ alert_message }}
  <a href="{% url 'activating_accounting_period' %}">Nhấn vào link này để tiến hành cập nhật phương pháp</a>
</div>
{% endif %}

{% endblock %}